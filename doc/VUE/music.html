
<html>
<!-- 开发环境版本，包含了有帮助的命令行警告 -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<!-- 官网提供的axios在线地址 -->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<head>
    <style>
        .body{
            border: 1px solid #ccc;
            width:600px;
            height: 400px;
            display: flex;
            flex-direction: column;
        }
        .body div:nth-child(2){
            flex-grow: 1;
        }
        .body_d{
            border:1px solid #ccc;
            height: 40px;
        }
        .top{
            display: flex;
            
        }
        .top div{
            line-height:40px;
        }
        .middle{
            display: flex;
            flex-direction: row;
            
        }
        .middle div{
            border:1px solid #ccc;
            width: 150px;
        }
        .middle div:nth-child(2){
            flex-grow: 1;
        }
        .music{
            overflow:auto;
        }
        .music ul{
            list-style: none;
            padding: 0px;
        }
        .music li{
            border-bottom: 1px solid #ccc;
        }
        .play{
            width: 22px;
            height: 22px;
        }
    </style>
<body>
    <div class="body">
        <div class="body_d top">
            <div>悦听</div>
            <div>
                <input type="text" style="width:200px;" placeholder="搜索歌曲" v-model="query" @keyup.enter="searchMusic"/>
            </div>
        </div>
        <div class="body_d middle">
            <div class="music">
                <ul>
                    <li v-for="(music,index) in musicList">
                        <span class="play" @click="playMusic(music.id)">☆</span>
                        {{index+1}}.{{music.name}}
                    </li>
                </ul>
            </div>
            <div class="image">图片</div>
            <div class="comment">评论</div>
        </div>
        <div class="body_d bottom">3</div>
    </div>
</body>
<script>
    var app = new Vue({
        el: ".body",
        data:{
            query:"",
            musicList:[],
            playStatus: false,
        },
        methods:{
            searchMusic: function(){
                /**
                歌曲搜索接口
                请求地址：https://autumnfish.cn/search
                请求方法: get
                请求参数：keywords(查询关键字)
                响应内容：歌曲列表
                **/
                if(this.query != ""){
                    var that = this;
                    axios.get("https://autumnfish.cn/search?keywords="+that.query).then(
                    function(response){
                        var songs = response.data.result.songs;
                        that.musicList = songs;
                        // for(var o in songs){
                        //     that.musicList.push(songs[o].name)
                        // }
                        
                    },function(err){

                    })
                }else{
                    alert("请输入查询歌曲")
                }
            },
            playMusic: function(id){
                /**
                歌曲url获取接口
                请求地址：https://autumnfish.cn/song/url
                请求方法: get
                请求参数：id(查询关键字)
                响应内容：歌曲url地址
                **/
                console.log(id)
                // axios.get("https://autumnfish.cn/song/url?id="+ id)
                // .then(function(response){

                // },function(err){

                // })
            }
        }
    })
</script>
</head>
</html>